---
layout: post
title: 'JDK关键字之volatile'
date: 2019-06-27
author: Sealer
cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-banner.png'
tags: JDK 关键字 volatile 并发 多线程 内存可见性 同步  

---

## java内存模型的可见性、原子性、有序性

###可见性

　　可见性指的是线程之间的可见性，即一个线程的修改对其他线程是可见的。即一个线程修改了某个变量，其他线程能马上看到最新修改后的值。

### 原子性

　　在一个操作中，cpu不可以中途暂停然后再调度，即具备原子性的操作不能被中断，要么执行完成，要么就不执行。

### 有序性

　　即程序执行时按照代码书写的先后顺序执行。

　　在Java内存模型中，允许编译器和处理器对指令进行重排序，但是重排序过程不会影响到单线程程序的执行，却会影响到多线程并发执行的正确性。


## volatile
　　_**volatile作为java中的关键词之一，用以声明变量的值可能随时会别的线程修改，使用volatile修饰的变量会强制将修改的值立即写入主存，主存中值的更新会使缓存中的值失效(非volatile变量不具备这样的特性，非volatile变量的值会被缓存，线程A更新了这个值，线程B读取这个变量的值时可能读到的并不是是线程A更新后的值)。**_

　　**_volatile会禁止指令重排。_**

　　**_volatile具备下述的可见性、有序性， 但不具备原子性。_**

### volatile的适用场景
1. 适用于对变量的写操作不依赖于当前值(如依赖当前值，则需要自行对写操作加锁同步)，对变量的读取操作不依赖于非volatile变量。
2. 适用于读多写少的场景。
3. 可用作状态标志。(TODO lsl 补充场景)

**_TODO 未完待续。。。_**
